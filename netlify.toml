[build]
  command = "npm run build:ci"
  publish = "public/"
  base = "website/"
  # The functions/ directory does not actually contain Netlify functions
  functions = "nofunctions/"

[build.environment]
  # Disable Cypress binary download since it takes too much time
  CYPRESS_INSTALL_BINARY = "0"

## Set up environment-specific build options

[context.production.environment]
  DISABLE_FULL_SITE = "1"
  DISABLE_DEMO_PAGES = "1"
  GATSBY_USE_PROD_FIREBASE = "1"
  GATSBY_GA_BRANCH = "master"

[context.staging.environment]
  DISABLE_DEMO_PAGES = "1"
  GATSBY_SAVE_THE_DATE_REDIRECT = "1"
  GATSBY_GA_BRANCH = "staging"

[context.branch-deploy.environment]
  GATSBY_GA_BRANCH = "develop"
